# SNP Frequency Bot  
**Telegram-–±–æ—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö —á–∞—Å—Ç–æ—Ç –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (SNP) —á–µ—Ä–µ–∑ NCBI dbSNP API**

![Python](https://img.shields.io/badge/Python-3.11-blue.svg)
![Aiogram](https://img.shields.io/badge/aiogram-3.x-green.svg)
![Redis](https://img.shields.io/badge/Redis-cache%20%2B%20rate--limit-red.svg)
![Docker](https://img.shields.io/badge/Docker-ready-informational.svg)
![License](https://img.shields.io/badge/license-MIT-blue.svg)

---

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

SNP Frequency Bot ‚Äî Telegram-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π:

- –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `rsID`,  
- –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ **NCBI dbSNP API**,  
- –∏–∑–≤–ª–µ–∫–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—ã –∞–ª–ª–µ–ª–µ–π,  
- —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—ã –≥–µ–Ω–æ—Ç–∏–ø–æ–≤ –ø–æ **Hardy‚ÄìWeinberg**,  
- —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π,  
- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

–ë–æ—Ç —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (24 —á–∞—Å–∞),
- –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ —Å—É—Ç–∫–∏,
- –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏: **30 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å**,
- inline-–∫–Ω–æ–ø–∫–∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ rsID,
- –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã `/help`, `/about`, `/stop`.

---

## üöÄ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

```
/get rs1801133
```

–û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:

- —á–∞—Å—Ç–æ—Ç—ã –∞–ª–ª–µ–ª–µ–π –ø–æ –ø–æ–ø—É–ª—è—Ü–∏—è–º,  
- –æ–∂–∏–¥–∞–µ–º—ã–µ –≥–µ–Ω–æ—Ç–∏–ø—ã H‚ÄìW,  
- –≥—Ä–∞—Ñ–∏–∫–∏ (PNG).

---

## üì° –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π API NCBI

–ë–æ—Ç –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–∏—Å—É:

```
GET https://api.ncbi.nlm.nih.gov/variation/v0/refsnp/{numeric_id}
```

–ù–∞–ø—Ä–∏–º–µ—Ä:

```
https://api.ncbi.nlm.nih.gov/variation/v0/refsnp/1801133
```

---

## üìä –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞ (—Å–æ–∫—Ä–∞—â–µ–Ω–æ)

```json
{
  "primary_snapshot_data": {
    "allele_annotations": [
      {
        "frequency": [
          {
            "study_name": "1000Genomes",
            "allele_count": 252,
            "total_count": 5008,
            "observation": {
              "deleted_sequence": "C",
              "inserted_sequence": "T"
            }
          }
        ]
      }
    ]
  }
}
```

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/ghostofpostmodern/RS_ID_searcher_9_group
cd snp-frequency-bot
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
```

### 3. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ `.env`

```
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
REDIS_URL=redis://redis:6379/0
NCBI_API_TIMEOUT=30
CACHE_TTL=86400
MAX_REQUESTS_PER_HOUR=30
```

### 4. –ó–∞–ø—É—Å–∫

```bash
docker compose up -d
```

### 5. –õ–æ–≥–∏

```bash
docker compose logs -f bot
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
snp-frequency-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ snp_frequency_bot/
‚îÇ       ‚îú‚îÄ‚îÄ bot.py
‚îÇ       ‚îú‚îÄ‚îÄ ncbi_client.py
‚îÇ       ‚îú‚îÄ‚îÄ snp_analyzer.py
‚îÇ       ‚îú‚îÄ‚îÄ plot_generator.py
‚îÇ       ‚îú‚îÄ‚îÄ cache_manager.py
‚îÇ       ‚îú‚îÄ‚îÄ config.py
‚îÇ       ‚îî‚îÄ‚îÄ logging_config.py
‚îÇ
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ .env.example
```

---

## üß≠ –ö–æ–º–∞–Ω–¥—ã Telegram-–±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `/start` | –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –ø—Ä–∏–º–µ—Ä—ã rsID |
| `/help` | —Å–ø—Ä–∞–≤–∫–∞ |
| `/get rsID` | –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å |
| `/history` | –∏—Å—Ç–æ—Ä–∏—è –∑–∞ 24 —á–∞—Å–∞ |
| `/about` | –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –¥–∏—Å–∫–ª–µ–π–º–µ—Ä |
| `/stop` | –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É |

---

## üìå –ü—Ä–∏–º–µ—Ä—ã –≤–∞–ª–∏–¥–Ω—ã—Ö rsID

| rsID | –ì–µ–Ω | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------|----------|
| `rs1801133` | MTHFR | C677T |
| `rs429358` | APOE | —á–∞—Å—Ç—å APOE Œµ4 |
| `rs7412` | APOE | —á–∞—Å—Ç—å APOE Œµ2/3/4 |
| `rs1695` | GSTP1 | Ile105Val |
| `rs7903146` | TCF7L2 | –ú–∞—Ä–∫–µ—Ä T2D |

---

## üîê –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env`.  
- Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
  - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è,
  - –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤,
  - rate limiting.  
- –õ–∏–º–∏—Ç: **30 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å**.  
- –î–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ø–æ–ª–Ω–æ—Ç—ã –±–∞–∑—ã NCBI.

---

## ‚ö†Ô∏è –î–∏—Å–∫–ª–µ–π–º–µ—Ä

–ë–æ—Ç **–Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º**.  
–í—Å–µ –¥–∞–Ω–Ω—ã–µ ‚Äî –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ.  


---

## üìê –ú–µ—Å—Ç–∞ –¥–ª—è UML / BPMN –¥–∏–∞–≥—Ä–∞–º–º





